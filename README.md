# 自由進度学習支援システム

## プロジェクト概要

**名前**: 自由進度学習支援システム  
**目標**: 子どもたちが自ら考え実行する力を育み、個別最適な学びを実現する  
**主要機能**: 
- 学年・教科・単元別の学習カード
- 3コース制（じっくり・しっかり・ぐんぐん）による個別最適化
- AI先生によるソクラテス対話
- リアルタイム進捗可視化
- 非認知能力の育成と評価

## URL

- **開発環境**: https://3000-ifkm81ji5x491axns53a8-b9b802c4.sandbox.novita.ai
- **GitHub**: （未設定）

## 現在実装済みの機能

### ✅ フェーズ1（完了）

1. **トップページ**
   - 学年選択（小学1年〜中学3年）
   - 教科選択（算数など）
   - 教科書会社選択（東京書籍など）
   - 単元選択
   - ユーザー情報表示

2. **学習のてびき**
   - 単元目標の表示
   - 非認知能力目標の表示
   - 授業時間の表示
   - 3コース選択問題（じっくり・しっかり・ぐんぐん）
   - チェックテスト説明
   - 選択問題6題の一覧表示

3. **コース選択後の学習カード一覧**
   - 各コースの学習カード表示
   - 難易度表示（基本・標準・発展）
   - 実社会との関連表示

4. **データベース**
   - D1データベース（Cloudflare）
   - 全13テーブル構造
   - サンプルデータ（小学3年算数「かけ算の筆算」）

## データアーキテクチャ

### データモデル

**主要テーブル:**
- `users`: 教師・児童情報
- `classes`: クラス情報
- `curriculum`: カリキュラム（学年・教科・単元）
- `courses`: コース情報（基礎・標準・発展）
- `learning_cards`: 学習カード
- `hint_cards`: ヒントカード
- `optional_problems`: 選択問題（発展学習）
- `student_progress`: 学習進捗
- `learning_plans`: 学習計画
- `evaluations`: 評価データ
- `answers`: 解答と解説

### ストレージサービス

- **Cloudflare D1**: SQLiteベースの分散データベース
- **ローカル開発**: `.wrangler/state/v3/d1`に自動生成

### データフロー

```
トップページ → 選択 → 学習のてびき → コース選択 → 学習カード → 進捗保存
                                                              ↓
                                                         進捗ボード
```

## 主要な機能URI

### API エンドポイント

| エンドポイント | メソッド | 説明 | パラメータ |
|--------------|---------|------|-----------|
| `/api/curriculum/options` | GET | 学年・教科・教科書会社の選択肢取得 | なし |
| `/api/curriculum` | GET | カリキュラム一覧取得 | なし |
| `/api/curriculum/:id` | GET | 特定カリキュラムの詳細取得 | id: カリキュラムID |
| `/api/courses/:courseId/cards` | GET | コースの学習カード取得 | courseId: コースID |
| `/api/cards/:cardId` | GET | 学習カードの詳細とヒント取得 | cardId: カードID |
| `/api/progress` | POST | 学習進捗の保存 | student_id, curriculum_id, など |
| `/api/progress/class/:classCode` | GET | クラス全体の進捗取得 | classCode: クラスコード |

### ページパス

| パス | 説明 |
|-----|------|
| `/` | トップページ（学年・教科選択） |
| `/static/app.js` | フロントエンドJavaScript |

## 未実装の機能

### 次回実装予定（フェーズ2）

1. **学習カード詳細ページ**
   - 問題表示
   - ヒントカード機能
   - ソクラテス対話（AI先生）
   - 分かった度評価（絵文字選択）
   - 助けを求める機能（AI・先生・友達）

2. **学習計画表**
   - 学習計画作成
   - 振り返り記入
   - 振り返りAIフィードバック

3. **進捗ボード**
   - クラス全体の進捗可視化
   - 色分け表示（コース別）
   - 停滞児童の検知
   - 助け要請の可視化

4. **チェックテスト**
   - テスト問題表示
   - 自動採点
   - 合格判定

5. **解答タブ**
   - 全問題の解答集約
   - 詳細解説表示

### 今後の機能（フェーズ3）

1. **先生カスタマイズモード**
   - 問題編集機能
   - カスタムコンテンツ作成

2. **指導・評価タブ**
   - 3観点評価（ABC）
   - 非認知能力評価
   - 指導上の留意点

3. **学習環境デザイン**
   - 6カテゴリの環境提案
   - アフォーダンス理論実装

4. **多言語対応**
   - 多言語選択機能

5. **音声支援**
   - Text-to-Speech機能

6. **動的視覚支援**
   - アニメーション
   - インタラクティブ図表

## 推奨される次のステップ

1. **学習カード詳細ページの実装**
   - 最も重要な機能
   - 子どもたちが実際に学習する画面

2. **ヒント機能の実装**
   - 9割型答えられるヒント設計
   - 思考ツール提案

3. **ソクラテス対話（AI先生）の実装**
   - Gemini API統合
   - 対話型学習支援

4. **進捗ボードの実装**
   - 教師用の指導支援ツール
   - リアルタイム可視化

5. **学習計画表の実装**
   - 自己調整学習の促進
   - 振り返りAI機能

## ユーザーガイド

### 児童向け

1. **学習を始める**
   - トップページで学年・教科・単元を選択
   - 「学習を始める」ボタンをクリック

2. **コースを選ぶ**
   - 3つの選択問題を見て、自分に合ったコースを選択
   - じっくり：基礎からゆっくり
   - しっかり：標準的な学習
   - ぐんぐん：応用にチャレンジ

3. **学習カードで学ぶ**
   - 1枚ずつ学習カードを進める
   - わからないときはヒントやAI先生に助けを求める
   - 分かった度を記録する

4. **選択問題に挑戦**
   - チェックテスト合格後、興味のある問題を選んで挑戦

### 教師向け

1. **クラス設定**
   - クラスコードを発行
   - 児童を登録

2. **進捗確認**
   - 進捗ボードでクラス全体を把握
   - 停滞している児童を早期発見

3. **指導介入**
   - 助けを求めている児童に対応
   - 評価データの記録

## デプロイメント

### 開発環境

- **プラットフォーム**: Cloudflare Pages (ローカル開発モード)
- **ステータス**: ✅ Active
- **技術スタック**: 
  - バックエンド: Hono + TypeScript
  - フロントエンド: Vanilla JavaScript + TailwindCSS
  - データベース: Cloudflare D1 (SQLite)
  - 実行環境: Cloudflare Workers

### ローカル開発コマンド

```bash
# データベースのリセット
npm run db:reset

# ローカル開発サーバー起動
npm run dev:sandbox

# ビルド
npm run build

# PM2で起動
pm2 start ecosystem.config.cjs

# PM2ログ確認
pm2 logs --nostream

# PM2停止
pm2 delete webapp
```

### 本番デプロイ（未実施）

```bash
# 本番データベース作成
npx wrangler d1 create webapp-production

# マイグレーション適用
npm run db:migrate:prod

# デプロイ
npm run deploy:prod
```

## サンプルデータ

**単元**: 小学3年算数「かけ算の筆算」  
**クラス**: さくら小学校 3年1組 (CLASS2024A)  
**児童数**: 5名  
**コース数**: 3コース（じっくり・しっかり・ぐんぐん）  
**学習カード数**: 18枚（各コース6枚）  
**選択問題数**: 6題

## 教育哲学

**基本概念**: 「子どもは自ら考え実行する力をもっている存在である」

### 育みたい力

1. **体験・感覚・具体操作**を大切にする
2. **感じる力**
3. **意欲**
4. **好き（興味・関心）**
5. **個別最適な個性**

### 目指すもの

- 子どもの自立
- AI時代における人間としての力
- 学びのハンドルを子ども自身が握る
- 教師の業務負担軽減
- 授業スタイルの転換
- 子ども観の変革

## 最終更新日

2026-01-12

---

**開発者へ**: このシステムは、子どもたちの自律的な学びと先生方の働き方改革を両立させることを目指しています。一つひとつの機能が、子どもたちの成長と先生方の支援につながることを常に意識して開発を進めてください。
